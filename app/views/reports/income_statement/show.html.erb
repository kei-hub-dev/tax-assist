<!-- app/views/reports/income_statement/show.html.erb -->
<div class="page">
    <div class="narrow">
        <h1 class="page-title">損益計算書</h1>
        <div class="year-banner">選択中の会計年度:<span class="year-pill"><%= current_period.accounting_year %></span></div>

        <div class="table-wrap" style="margin-top:16px;">
            <table class="table">
                <thead>
                    <tr>
                        <th>項目</th>
                        <th style="text-align:right;">金額</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>売上高</td>
                        <td style="text-align:right;"><%= number_with_delimiter(@rev_breakdown["sales"]) %></td>
                    </tr>
                    <tr>
                        <td>売上原価</td>
                        <td style="text-align:right;"><%= number_with_delimiter(@exp_breakdown["cogs"]) %></td>
                    </tr>
                    <tr class="sum-row">
                        <td>売上総利益</td>
                        <td style="text-align:right;"><%= number_with_delimiter(@gross_profit) %></td>
                    </tr>

                    <tr>
                        <td>販売費及び一般管理費</td>
                        <td style="text-align:right;"><%= number_with_delimiter(@exp_breakdown["sganda"]) %></td>
                    </tr>
                    <tr class="sum-row">
                        <td>営業利益</td>
                        <td style="text-align:right;"><%= number_with_delimiter(@operating_income) %></td>
                    </tr>

                    <tr>
                        <td>営業外収益</td>
                        <td style="text-align:right;"><%= number_with_delimiter(@rev_breakdown["non_op_income"]) %></td>
                    </tr>
                    <tr>
                        <td>営業外費用</td>
                        <td style="text-align:right;"><%= number_with_delimiter(@exp_breakdown["non_op_expense"]) %></td>
                    </tr>
                    <tr class="sum-row">
                        <td>経常利益</td>
                        <td style="text-align:right;"><%= number_with_delimiter(@ordinary_income) %></td>
                    </tr>

                    <tr>
                        <td>特別利益</td>
                        <td style="text-align:right;"><%= number_with_delimiter(@rev_breakdown["special_gain"]) %></td>
                    </tr>
                    <tr>
                        <td>特別損失</td>
                        <td style="text-align:right;"><%= number_with_delimiter(@exp_breakdown["special_loss"]) %></td>
                    </tr>
                    <tr class="sum-row">
                        <td>税引前当期純利益</td>
                        <td style="text-align:right;"><%= number_with_delimiter(@income_before_tax) %></td>
                    </tr>

                    <tr>
                        <td>税等</td>
                        <td style="text-align:right;"><%= number_with_delimiter(@exp_breakdown["tax"]) %></td>
                    </tr>
                    <tr class="sum-row">
                        <td>当期純利益</td>
                        <td style="text-align:right;"><%= number_with_delimiter(@net_income) %></td>
                    </tr>
                </tbody>
            </table>
        </div>

        <div class="actions" style="margin-top:12px;">
            <div>ダウンロード:
                <%= link_to "CSV", reports_income_statement_path(format: :csv) %> /
                <%= link_to "PDF", reports_income_statement_path(format: :pdf) %>
            </div>
            <div class="hstack" style="margin-top:8px;">
                <%= link_to "会計メニューに戻る", accounting_menu_path, class: "btn btn-outline btn-sm" %>
            </div>
        </div>
    </div>
</div>